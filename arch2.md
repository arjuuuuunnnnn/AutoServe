┌─────────────────────────────────────────────────────────────────────────────┐
│                           External Traffic                                  │
└─────────────────────────┬───────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                    Application Load Balancer                                │
│                         Nginx (Port 80/443)                                 │
│                      container: autoserve-nginx                             │
│                                                                             │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐                │
│  │   my-app-0      │ │   my-app-1      │ │   my-app-2      │                │
│  │ 172.20.0.5:8080 │ │ 172.20.0.6:8080 │ │ 172.20.0.7:8080 │                │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘                │
│                   (Internal Docker Network IPs)                             │
└─────────────────────────┬───────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                    Controller Load Balancer                                 │
│                         Nginx (Port 8000)                                   │
│                   container: autoserve-controller-lb                        │
└─────────────────────────┬───────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                 AutoServe Controller Cluster                                │
│                                                                             │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐                │
│  │ Controller-1    │ │ Controller-2    │ │ Controller-3    │                │
│  │   (Leader) ★    │ │  (Follower)     │ │  (Follower)     │                │
│  │   Port 8001     │ │   Port 8002     │ │   Port 8003     │                │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘                │
└─────────────────────────┬───────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                    PostgreSQL HA Cluster                                    │
│  ┌─────────────────┐                        ┌─────────────────┐             │
│  │    Primary      │◄──── Streaming    ────►│     Replica     │             │
│  │   Port 5432     │      Replication       │   Port 5433     │             │
│  └─────────────────┘                        └─────────────────┘             │
└─────────────────────────┬───────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                      Docker Engine                                          │
│                   Network: autoserve (bridge)                               │
│                                                                             │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐                │
│  │    my-app-0     │ │    my-app-1     │ │    my-app-2     │                │
│  │   (Container)   │ │   (Container)   │ │   (Container)   │                │
│  │ 172.20.0.5:8080 │ │ 172.20.0.6:8080 │ │ 172.20.0.7:8080 │                │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘                │
│                                                                             │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐                │
│  │  api-service-0  │ │  api-service-1  │ │   worker-app-0  │                │
│  │   (Container)   │ │   (Container)   │ │   (Container)   │                │
│  │ 172.20.0.8:3000 │ │ 172.20.0.9:3000 │ │172.20.0.10:8080 │                │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘                │
│                                                                             │
│  No host port publishing - all internal Docker network communication        │
└─────────────────────────────────────────────────────────────────────────────┘
